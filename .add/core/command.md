# ADD カスタムコマンド・プロトコル

AIエージェントは、以下の日本語コマンドを受けた際、それぞれのプロトコルを自律的に実行せよ。

### 1. 【ADDで開始して】 (Initialize Task)
- **内容**: 新しいタスクの隔離環境を構築する。
- **動作**: 
  1. `.add/core/templates/task_blueprint/` を `workspace/YYYY-MM-DD-{{タスク名}}` として丸ごとコピーせよ。
  2. `00_lake/lake.md` に現在の依頼内容を整理して記述せよ。

### 2. 【設計（Phase）して】 (Phase Design)
- **内容**: Lakeを分析し、ボトムアップ実装のロードマップを作成する。
- **動作**: 
  1. `core/templates/phase.md` を使い、`01_phases/phase.md` に全体計画を記述せよ。
  2. 同時に `02_iterations/` 内に、定義した各Phaseに対応するサブフォルダ（例: `phase1/`）を作成せよ。

### 3. 【Phase [X] を開始して】 (Start Iteration)
- **内容**: 特定のマイルストーンの実装（TDD）に移行する。
- **動作**: 
  1. 指定された `02_iterations/phaseX/` をカレントの作業ディレクトリとして認識せよ。
  2. フォルダ内に `steps.md` がない場合はテンプレートから作成し、[Red] ステップを開始せよ。

### 4. 【状況を教えて】 (Status Check)
- **内容**: 現在の作業地点と次のタスクを即座に確認する。
- **動作**: `01_phases/phase.md` と現在のイテレーション内の `steps.md` を確認し、完了済みの項目と次に行うべきステップを簡潔に報告せよ。

### 5. 【しおりを挟んで】 (Bookmark)
- **内容**: 現在の思考状態をダンプして中断する。
- **動作**: `core/templates/bookmark.md` を使い、`04_bookmark.md` を作成・更新せよ。

### 6. 【しおりから再開して】 (Resume)
- **内容**: 中断したタスクを再開する。
- **動作**: `04_bookmark.md` を読み込み、記憶を復元して「次の一手」を提案せよ。

### 7. 【検証（Verify）して】 (Verify)
- **内容**: 実装の機械的正しさを担保する（95点→100点）。
- **動作**: 静的解析（PHPStan/ESLint等）を実行し、その結果を `03_verification/` に記録。エラーがあれば修正案を提示せよ。

### 8. 【昇華（Learn）して】 (Learning)
- **内容**: 知見を Core に反映し、AIを自分専用に成長させる。
- **動作**: `workspace` のログを分析し、ユーザーの癖やドメインルールを抽出して `core/memory/` を更新せよ。

### 9. 【同期（Sync）して】 (Sync)
- **内容**: 最新の資産（Core）を再ロードしてコンテキストをリフレッシュする。
- **動作**: `.add/core/` 以下のすべてのガイドライン、スキル、メモリを再読込せよ。